import{g as r,f as I,m as N,n as B,p as V,_ as A,r as O,o as n,c,a as o,b as m,u as t,q as R,w as d,F as z,v as $,e as D,x as T,t as b,s as U,j as F,y as j,k as S,A as K,B as q}from"./index-bd0ec6da.js";import{m as E,u as H,a as G,s as J,b as Q,c as W,d as X}from"./device-66c051d5.js";import{s as Y}from"./selectbutton.esm-b7c9e594.js";import{s as Z}from"./inputtext.esm-8875acc8.js";import{s as ee}from"./confirmdialog.esm-1e676f76.js";import{u as te}from"./store-f78068e4.js";import"./paginator.esm-9987b5ab.js";import"./dropdown.esm-73a4fc35.js";import"./focustrap.esm-ab8cb822.js";import"./index.esm-fd88f9de.js";import"./dialog.esm-0d200068.js";const se=()=>{const i=r(!0),f=te(),p=r(),w=r(),s=r({}),k=r(),x=r(0),_=r(""),g=r(["Ongoing","Discharged"]),P=r([{field:"id",header:"ID",selected:!1,style:"min-width: 5rem",frozen:!1},{field:"am_number",header:"AM Number",sortable:!0,selected:!0,style:"min-width: 5rem"},{field:"user_full_name",header:"CM",sortable:!0,selected:!0,style:"min-width: 5rem"},{field:"patient_name",header:"Patient",sortable:!0,selected:!0,style:"min-width: 5rem"}]),v=r(null);I(()=>{h(),u()}),N(()=>{f.$dispose()});const u=async()=>{i.value=!0,await f.fetchAll({page:s.value.page+=1,per_page:s.value.rows,order:E(s.value.multiSortMeta),search:_.value,status:v.value});const a=f.getAllResponse;a&&(k.value=a.data,x.value=a.meta.total),i.value=!1},h=()=>{s.value={page:0,rows:w.value.rows,multiSortMeta:[],first:0}},L=a=>{s.value=a,s.value.multiSortMeta=[],u()},M=a=>{s.value=a,s.value.page=0,s.value.first=0,u()},C=a=>{p.value.toggle(a)},l=B(()=>P.value.filter(a=>a.selected));return V([_],H(()=>{h(),u()},500)),V([v],()=>{h(),u()}),{dt:w,lazyParams:s,totalRecords:x,records:k,isLoading:i,search:_,statusOptions:g,selectedStatus:v,onPage:L,onSort:M,toggleColumnMenu:C,selectedColumns:l,columns:P,columnMenu:p}};const ae=i=>(K("data-v-87dc0cc1"),i=i(),q(),i),oe={class:"card mb-4"},le={class:"flex justify-content-left"},re={class:"card"},ne={class:"flex flex-wrap flex-row-reverse align-items-center"},ie={class:"p-input-icon-left mr-2 mb-2 flex-1"},de=ae(()=>o("i",{class:"pi pi-search"},null,-1)),ue=["for"],ce={key:0},me={key:1},pe={key:2},fe={class:"text-center w-full"},_e={class:"mt-2"},ge={__name:"List",setup(i){const{statusOptions:f,selectedStatus:p,dt:w,lazyParams:s,totalRecords:k,records:x,isLoading:_,search:g,onPage:P,onSort:v,selectedColumns:u,columns:h,columnMenu:L}=se(),{isMobile:M}=G();return(C,l)=>{const a=O("router-link");return n(),c(z,null,[o("div",null,[o("div",oe,[o("div",le,[m(t(Y),{modelValue:t(p),"onUpdate:modelValue":l[0]||(l[0]=e=>R(p)?p.value=e:null),options:t(f),"aria-labelledby":"basic"},null,8,["modelValue","options"])])]),o("div",re,[m(t(X),{ref_key:"dt",ref:w,dataKey:"id",lazy:!0,paginator:!0,value:t(x),onPage:l[2]||(l[2]=e=>t(P)(e)),onSort:l[3]||(l[3]=e=>t(v)(e)),sortMode:"multiple",multiSortMeta:t(s).multiSortMeta,totalRecords:t(k),rows:5,rowsPerPageOptions:[5,10,20,50,100],scrollable:!0,first:t(s).first,scrollHeight:"60vh",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"{first} to {last} of total {totalRecords}",loading:t(_),responsiveLayout:"scroll"},{header:d(()=>[o("div",ne,[m(t(U),{class:"mb-2 flex-2 mr-2",label:"Download",icon:"pi pi-download",severity:"secondary",text:""}),o("span",ie,[de,m(t(Z),{modelValue:t(g),"onUpdate:modelValue":l[1]||(l[1]=e=>R(g)?g.value=e:null),placeholder:"Keyword Search",class:"w-full md:w-auto"},null,8,["modelValue"])]),m(t(J),{ref_key:"columnMenu",ref:L,appendTo:"body",id:"columnPanel",style:{width:"250px"}},{default:d(()=>[(n(!0),c(z,null,$(t(h),e=>(n(),c("div",{key:e.field,class:"field-checkbox"},[m(t(Q),{inputId:e.field,name:"column",modelValue:e.selected,binary:!0,onChange:y=>e.selected=!e.selected,disabled:e.frozen},null,8,["inputId","modelValue","onChange","disabled"]),o("label",{for:e.field},b(e.header),9,ue)]))),128))]),_:1},512)])]),empty:d(()=>[D(" No records found. ")]),loading:d(()=>[D(" Loading records data. Please wait. ")]),default:d(()=>[(n(!0),c(z,null,$(t(u),e=>(n(),F(t(W),{key:e.field,field:e.field,header:e.header,sortable:e.sortable,frozen:!t(M)&&e.frozen,alignFrozen:e.alignFrozen,style:j(e.style)},{body:d(({data:y})=>[C.$can("view","Case")?(n(),F(a,{key:0,class:"text-black-alpha-90",to:{name:"viewCase",params:{id:y.id}}},{default:d(()=>[e.field==="am_number"?(n(),c("div",ce,b(y.am_number),1)):S("",!0),e.field==="user_full_name"?(n(),c("div",me,b(y.user_full_name),1)):S("",!0),e.field==="patient_name"?(n(),c("div",pe,b(y.patient_name),1)):S("",!0)]),_:2},1032,["to"])):S("",!0)]),_:2},1032,["field","header","sortable","frozen","alignFrozen","style"]))),128))]),_:1},8,["value","multiSortMeta","totalRecords","first","loading"])])]),m(t(ee),null,{message:d(e=>[o("div",fe,[o("i",{class:T([e.message.icon,"mt-2 text-red-500 text-5xl"])},null,2),o("div",_e,b(e.message.message),1)])]),_:1})],64)}}},Ce=A(ge,[["__scopeId","data-v-87dc0cc1"]]);export{Ce as default};
